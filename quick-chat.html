<!DOCTYPE html>
<html>
<head>
    <title>Chat Debugger</title>
    <script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    <style>
        body { background: #333; color: #fff; font-family: sans-serif; padding: 50px; }
        input { padding: 10px; width: 300px; }
        button { padding: 10px 20px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <h2>Chat Connectivity Test</h2>
    <input type="text" id="debugMsg" value="Test Message from Tool" />
    <button id="btnJquery">SEND (Owner's Method)</button>
    <button id="btnFetch">SEND (Native Fetch)</button>
    <p id="status">Waiting...</p>

    <script>
        // 1. OWNER'S METHOD (jQuery)
        document.getElementById('btnJquery').addEventListener('click', function() {
            const msg = document.getElementById('debugMsg').value;
            document.getElementById('status').innerText = "Attempting jQuery Send...";
            
            if (typeof $ === 'undefined') {
                document.getElementById('status').innerText = "FAIL: jQuery not loaded.";
                return;
            }

            $.post('http://chat/chatResult', JSON.stringify({
                message: msg,
                channel: "Chat",
            }));
            document.getElementById('status').innerText = "jQuery Post Fired.";
        });

        // 2. ALTERNATIVE METHOD (Fetch)
        document.getElementById('btnFetch').addEventListener('click', function() {
            const msg = document.getElementById('debugMsg').value;
            document.getElementById('status').innerText = "Attempting Fetch Send...";

            fetch('http://chat/chatResult', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    message: msg,
                    channel: "Chat"
                })
            }).then(() => {
                document.getElementById('status').innerText = "Fetch Success (Sent)";
            }).catch(err => {
                document.getElementById('status').innerText = "Fetch Error: " + err;
            });
        });
    </script>
</body>
</html>
